"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[649],{421:(e,t,n)=>{n.d(t,{Fs:()=>l,YS:()=>u,ax:()=>i,hb:()=>s});var o=n(803),r=n.n(o),a=n(611),c=n.n(a),l=new(r())("the_north_face",localStorage),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return c().get(window._setting_,e,t)},i=function(e,t){return Math.random()*(t-e)+e},s=function(e){switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}}},344:(e,t,n)=>{n.d(t,{b2:()=>l,HN:()=>i,Lf:()=>s,hx:()=>d,F0:()=>p,EE:()=>h});var o=n(611),r=n.n(o),a=n(421),c="locations";a.Fs.tableExists(c)||(a.Fs.createTable(c,["name","phone","area","address","tag","default","detail"]),a.Fs.commit());var l=function(){return a.Fs.queryAll(c)},u=function(){a.Fs.update(c,{default:!0},(function(e){return e.default=!1,e}))},i=function(e){null!=e&&e.default&&u();var t=a.Fs.insert(c,e);return a.Fs.commit(),t},s=function(e,t){var n=r().pick(e,["name","phone","area","address","tag","default","detail"]);null!=e&&e.default&&u(),a.Fs.update(c,{ID:t},(function(e){return n})),a.Fs.commit()},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return a.Fs.query(c,e,t,null)},f=null,p=function(){var e;return f&&(e=d({ID:f},1),console.log("choseIdData",e)),e&&e.length||(e=a.Fs.query(c,null,1,null,[["default","DESC"]])),r().get(e,"0")},h=function(e){console.log("setChosenLocationId",e),f=e}},649:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var o=n(311),r={class:"location-index"};var a=n(344),c=(n(871),n(243));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s={name:"location-index",setup:function(){var e,t=(0,c.useRouter)(),n=(0,a.F0)();console.log("chose",n);var r=(0,o.reactive)({locations:null===(e=(0,a.b2)())||void 0===e?void 0:e.map((function(e){return u(u({},e),{},{id:e.ID,tel:e.phone,address:e.detail,isDefault:e.default})})),chosenAddressId:null==n?void 0:n.ID});return u(u({},(0,o.toRefs)(r)),{},{onAdd:function(){t.push({path:"/location/create",query:{action:"chose"}})},onEdit:function(e,n){t.push({path:"/location/create",query:{action:"chose",id:e.id}})},onSelect:function(e){(0,a.EE)(e.id),t.back()}})}};const d=(0,n(744).Z)(s,[["render",function(e,t,n,a,c,l){var u=(0,o.resolveComponent)("van-nav-bar"),i=(0,o.resolveComponent)("van-address-list");return(0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createVNode)(u,{fixed:"",placeholder:"","left-arrow":"",title:"收货地址",onClickLeft:t[0]||(t[0]=function(t){return e.$router.back()})}),(0,o.createVNode)(i,{modelValue:e.chosenAddressId,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.chosenAddressId=t}),list:e.locations,"default-tag-text":"默认",onAdd:a.onAdd,onEdit:a.onEdit,onSelect:a.onSelect},null,8,["modelValue","list","onAdd","onEdit","onSelect"])])}]])}}]);